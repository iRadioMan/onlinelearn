<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тема 23</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="text">
		<h1><strong>Демонстрация создания элемента User Control в WPF</strong></h1>

		<p>На&nbsp;данном занятии будет разработан пользовательский элемент управления (User Control). User Control предоставляет простой способ создания собственных элементов управления и&nbsp;является объединением нескольких уже существующих элементов управления в&nbsp;один элемент, допускающий простое повторное использование. В&nbsp;данном примере разрабатывается элемент ромб, внутри которого будет находиться изображение (требуется несколько таких элементов). По&nbsp;умолчанию демонстрируется черно-белое изображение, при наведении курсора на&nbsp;изображение демонстрируется его цветная версия. Под изображением располагается заголовок и&nbsp;описание, разделенные линией. При нажатии на&nbsp;изображение демонстрируется текст. Основные шаги реализации элемента User Control:</p>

		<ol>
			<li>Создание</li>
			<li>Реализация</li>
			<li>Использование</li>
		</ol>

		<h1><strong>Создание элемента User Control</strong></h1>

		<p><strong>1.</strong>&nbsp;Добавляем элемент User Control</p>

		<p><img alt="" src="img/1.jpg" /></p>

		<p><strong>2.</strong>&nbsp;Создаем требуемые свойства элемента</p>

		<p><img alt="" src="img/2.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>К&nbsp;свойствам элемента относятся: заголовок, описание, цветная версия изображения, а&nbsp;также черно-белая версия, которая будет конвертироваться из&nbsp;цветного изображения</p>

		<p><strong>3.</strong>&nbsp;Устанавливаем DataContext</p>

		<p><img alt="" src="img/3.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Установка DataContext (контекста данных) позволяет делать привязку элементов разметки к&nbsp;свойствам</p>

		<h1><strong>Реализация элемента User Control</strong></h1>

		<p><strong>1.</strong>&nbsp;Добавляем элемент Grid</p>

		<p><img alt="" src="img/4.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Grid (сетка) разделяется на&nbsp;четыре строки заданной высоты. Обратите внимание на&nbsp;рабочую область, где демонстрируется вид приложения</p>

		<p><strong>2.</strong>&nbsp;Настраиваем представление основного элемента-ромба</p>

		<p><img alt="" src="img/5.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>В&nbsp;первой строке Grid будет располагаться ромб. Элемент ViewBox позволит растягивать ромб с&nbsp;изображением по&nbsp;размеру контейнера. Также внутри ViewBox будет находиться кнопка с&nbsp;переопределенным template (шаблоном)</p>

		<p><strong>3.</strong>&nbsp;Добавляем содержимое кнопки внутри ромба</p>

		<p><img alt="" src="img/6.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Кнопка представляет собой элемент Path, для которого задаются координаты вершин, толщина и&nbsp;цвет границ</p>

		<p><strong>4.</strong>&nbsp;Настраиваем отображение заголовка</p>

		<p><img alt="" src="img/7.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Заголовок размещается внутри элемента TextBlock, текст которого привязывается к&nbsp;свойству Header, а&nbsp;ширина&nbsp;&mdash; к&nbsp;текущим размерам ViewBox. Зеленая линия цвета DarkGreen добавляется для того, чтобы разделить заголовок и&nbsp;описание</p>

		<p><strong>5.</strong>&nbsp;Настраиваем отображение описания</p>

		<p><img alt="" src="img/8.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>TextBlock для описания добавляется по&nbsp;аналогии с&nbsp;заголовком с&nbsp;тем лишь отличием, что цвет шрифта будет серым</p>

		<p><strong>6.</strong>&nbsp;Настраиваем поведение изображения</p>

		<p><img alt="" src="img/9.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Поведение изображения будет зависеть от&nbsp;значения свойства IsMouseOver. Если свойство принимает значение true, демонстрируется цветное изображение ColoredSource и&nbsp;черно-белое BlackWhiteSource в&nbsp;противном случае</p>

		<p><strong>7.</strong>&nbsp;Добавляем кнопку для вывода информации об&nbsp;изображении</p>

		<p><img alt="" src="img/10.jpg" /></p>

		<p><strong>8.</strong>&nbsp;Реализуем обработку клика</p>

		<p><img alt="" src="img/11.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Обработкой будет служить вывод информации об&nbsp;элементе в&nbsp;MessageBox</p>

		<h1><strong>Использование User Control</strong></h1>

		<p><strong>1.</strong>&nbsp;Используем созданный элемент в&nbsp;интерфейсе</p>

		<p><img alt="" src="img/12.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Несколько созданных элементов располагаются на&nbsp;MainWindow в&nbsp;StackPanel с&nbsp;горизонтальной ориентацией. Следует обратить внимание, что для использования пользовательского элемента управления используется префикс local</p>

		<p><strong>2.</strong>&nbsp;Добавим изображения в&nbsp;проект</p>

		<p><img alt="" src="img/13.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Изображения для каждого элемента подгружаются из&nbsp;папки Assets, куда они предварительно добавляются (см.&nbsp;на&nbsp;область внутри черной рамки)</p>

		<p><strong>3.</strong>&nbsp;Добавим каждому элементу соответствующее изображение</p>

		<p><img alt="" src="img/14.jpg" /></p>

		<p><strong>Важно</strong></p>

		<p>Изображения можно добавлять как вручную, так и&nbsp;путем выбора в&nbsp;окне свойств. В&nbsp;данном случае требуемое изображение выбирается из&nbsp;нескольких, хранящихся в&nbsp;папке Assets (см.&nbsp;на область внутри черной рамки)</p>

		<p><strong>4.</strong>&nbsp;Проверяем результат<br />
		<br />
		A) Курсор не&nbsp;на&nbsp;изображениях<br />
		B) Курсор на&nbsp;изображении<br />
		C) Обработка нажатия</p>

		<p><img alt="" src="img/15.jpg" /></p>

		<h1>Итоги</h1>

		<p>Вы&nbsp;познакомились с&nbsp;созданием собственного элемента управления в&nbsp;WPF.&nbsp;</p>

    </div>
</body>
</html>