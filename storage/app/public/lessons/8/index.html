<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тема 8</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="text">
        <p>Продолжим разработку настольного приложения и&nbsp;поговорим об&nbsp;альтернативном DataGrid&rsquo;у элементе, который может отображать информацию из&nbsp;базы данных&nbsp;&mdash; ListView. Как правило, он&nbsp;представляет собой стандартный список. Однако при желании вы&nbsp;можете сделать сложную компоновку объекта, которую не&nbsp;получилось&nbsp;бы реализовать с&nbsp;помощью DataGrid. Также можно вывести элементы не&nbsp;только построчно, но и, например, плитками, реализовать поиск и&nbsp;фильтрацию информации.</p>

		<h1><strong>Вывод информации об автомобилях с ListView</strong></h1>
		
		<p>Для вывода информации об&nbsp;автомобилях добавляем новую страницу с&nbsp;ListView.&nbsp;Переходим на&nbsp;нее сразу после инициализации компонентов MainWindow.</p>

		<p><img alt="" src="img/1.jpg" /></p>

		<p>Подготавливаем разметку грида&nbsp;&mdash; это две строки.</p>

		<p><img alt="" src="img/2.jpg" /></p>

		<p>Добавляем элемент ListView, размечаем в&nbsp;гриде и&nbsp;задаем имя.</p>

		<p><img alt="" src="img/3.jpg" /></p>

		<p>Для вывода информации об автомобиле создается шаблон элемента в&nbsp;списке&nbsp;&mdash; то&nbsp;представление, которое должно отображаться для каждого элемента.</p>

		<p>Создаем шаблон и&nbsp;размечаем его грид, указав при этом размер строк.</p>

		<p><img alt="" src="img/4.jpg" /></p>

		<p>Добавляем в&nbsp;ресурсы изображение, которое будем выводить при отсутствии картинки у&nbsp;автомобиля.</p>

		<p><img alt="" src="img/5.jpg" /></p>

		<p>Добавляем изображение автомобиля в&nbsp;верстку, установив необходимые атрибуты.</p>

		<p><img alt="" src="img/6.jpg" /></p>

		<p>Теперь задаем объекты для привязки, а&nbsp;также изображение, если изображения автомобиля&nbsp;не&nbsp;будет.</p>

		<p><img alt="" src="img/7.jpg" /></p>

		<p>Добавляем текстовые поля для наименования, указав: перенос текста, выравнивание, большой шрифт; для стоимости, указав: выравнивание, также большой шрифт, но&nbsp;делаем текст жирным; номер &mdash; выравниваем по&nbsp;правому краю; и цвет&nbsp;&mdash; выравниваем по&nbsp;левому краю.</p>

		<p><img alt="" src="img/8.jpg" /></p>

		<p>Добавляем привязки для наименования, стоимости, номера и цвета.</p>

		<p><img alt="" src="img/9.jpg" /></p>

		<p>Загружаем коллекцию &laquo;список&raquo; в коде.</p>

		<p><img alt="" src="img/10.jpg" /></p>
		
		<p>Мы&nbsp;не&nbsp;загрузили автомобили в&nbsp;список&nbsp;&mdash; наш ListView.</p>

		<p><img alt="" src="img/11.jpg" /></p>

		<p>Запускаем приложение.</p>

		<p><img alt="" src="img/12.jpg" /></p>

		<p>Работаем над форматом отображения стоимости, номера и цвета. Указываем StringFormat для указания цены (два знака после запятой), примечание к&nbsp;номеру и цвету. Делать это можно прямо во&nbsp;время запуска приложения.</p>

		<p><img alt="" src="img/13.jpg" /></p>
		
		<p>Теперь изменяем представление ListView на&nbsp;плитку. У&nbsp;нас в&nbsp;качестве ItemsPanel будет находиться RowPanel, который позволяет нам переносить элементы в&nbsp;виде плиток. И&nbsp;не&nbsp;забываем убрать горизонтальную прокрутку в&nbsp;ListView.</p>

		<p><img alt="" src="img/14.jpg" /></p>

		<p>Проверяем результат.</p>

		<p><img alt="" src="img/15.jpg" /></p>

		<h1><strong>Реализация поиска и фильтрации информации</strong></h1>

		<p>Как говорилось ранее, для работы с&nbsp;большими объемами информации полезно реализовать поиск и&nbsp;фильтрацию. Как это работает? Пользователь вводит в&nbsp;специальные элементы управления данные для поиска или выбирает категории из&nbsp;списка для фильтрации. Затем в&nbsp;коде разработчик приводит коллекцию данных к&nbsp;виду, который соответствует поиску, и&nbsp;загружает результаты в&nbsp;ListView. Давайте сделаем это.</p>

		<p>Для начала необходимо подготовить внешний вид страницы. Добавляем элементы для поиска и&nbsp;фильтрации. Для поиска это будет TextBox, для фильтрации&nbsp;&mdash; ComboBox, который представляет собой выпадающий список объектов. Обязательно даем подсказки, чтобы пользователь знал, что именно вводить. И&nbsp;устанавливаем атрибуты, например, на&nbsp;выравнивание и размеры. Также указываем, какое поле отображать для ComboBox. Делать это мы&nbsp;будем также в&nbsp;RowPanel, чтобы переносить элементы при изменениях размера экрана.</p>

		<p><img alt="" src="img/16.jpg" /></p>

		<p>В&nbsp;плане удобства использования наиболее выигрышно выглядит механизм, когда результаты поиска выводятся сразу по&nbsp;мере ввода ключевого слова или выбора значения в&nbsp;выпадающем списке. Поэтому мы&nbsp;обработаем соответствующие события на&nbsp;каждый элемент.</p>

		<p>Во-первых, это TextChanged на изменение текста для поиска.</p>

		<p><img alt="" src="img/17.jpg" /></p>

		<p>Затем при изменении выбора в выпадающем списке &mdash; Selection Changed.</p>

		<p><img alt="" src="img/18.jpg" /></p>

		<p>Загружаем данные в ComboBox, добавив типы автомобилей. Делается это в&nbsp;коде.</p>

		<p><img alt="" src="img/19.jpg" /></p>

		<p>Устанавливаем стартовые значения для элемента&nbsp;ComboBox.</p>

		<p><img alt="" src="img/20.jpg" /></p>

		<p>Обрабатываем методы поиска и&nbsp;фильтрации так, чтобы они работали вместе. Для этого в&nbsp;одном методе выполним фильтрацию коллекции, поиск по&nbsp;ней и&nbsp;сортировку, а&nbsp;затем вызываем этот метод из&nbsp;обработчиков событий всех наших элементов управления.</p>

		<p>Для начала создаем метод UpdateCars()</p>

		<p><img alt="" src="img/21.jpg" /></p>

		<p>Выполняем фильтрацию, поиск и&nbsp;сортировку. После этого загружаем полученные результаты в&nbsp;коллекцию.</p>

		<p><img alt="" src="img/22.jpg" /></p>

		<p>Вызываем этот метод в&nbsp;каждом обработчике элементов управления и&nbsp;при запуске страницы.</p>

		<p><img alt="" src="img/23.jpg" /></p>

		<p><img alt="" src="img/24.jpg" /></p>
		
		<h1><strong>Итоги</strong></h1>

		<p>ListView предлагает более гибкий способ для отображения данных, с&nbsp;которыми можно взаимодействовать так&nbsp;же, как и&nbsp;с&nbsp;DataGrid. Кроме того, методы поиска и&nbsp;фильтрации значительно упрощают процесс выборки информации, что повышает удобство пользования программой.</p>

    </div>
</body>
</html>